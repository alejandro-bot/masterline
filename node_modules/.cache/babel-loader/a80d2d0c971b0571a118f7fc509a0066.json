{"remainingRequest":"C:\\laragon\\www\\frontend-masterline\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\frontend-masterline\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\frontend-masterline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\frontend-masterline\\node_modules\\vue-upload-multiple-image\\src\\components\\VueUploadMultipleImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\laragon\\www\\frontend-masterline\\node_modules\\vue-upload-multiple-image\\src\\components\\VueUploadMultipleImage.vue","mtime":499162500000},{"path":"C:\\laragon\\www\\frontend-masterline\\babel.config.js","mtime":1570233076000},{"path":"C:\\laragon\\www\\frontend-masterline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\frontend-masterline\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\laragon\\www\\frontend-masterline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\frontend-masterline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { forEach, findIndex, orderBy, cloneDeep } from 'lodash';\nimport Popper from 'vue-popperjs';\nimport 'vue-popperjs/dist/css/vue-popper.css';\nimport VueImageLightboxCarousel from 'vue-image-lightbox-carousel';\nexport default {\n  name: 'VueUploadMultipleImage',\n  props: {\n    dragText: {\n      type: String,\n      default: 'Kéo hình ảnh(nhiều)'\n    },\n    browseText: {\n      type: String,\n      default: '(hoặc) Chọn'\n    },\n    primaryText: {\n      type: String,\n      default: 'Mặc định'\n    },\n    markIsPrimaryText: {\n      type: String,\n      default: 'Đặt làm mặc định'\n    },\n    popupText: {\n      type: String,\n      default: 'Hình ảnh này sẽ được hiển thị làm mặc định'\n    },\n    dropText: {\n      type: String,\n      default: 'Thả tệp của bạn ở đây ...'\n    },\n    accept: {\n      type: String,\n      default: 'image/gif,image/jpeg,image/png,image/bmp,image/jpg'\n    },\n    dataImages: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    showPrimary: {\n      type: Boolean,\n      default: true\n    },\n    maxImage: {\n      type: Number,\n      default: 5\n    },\n    idUpload: {\n      type: String,\n      default: 'image-upload'\n    },\n    idEdit: {\n      type: String,\n      default: 'image-edit'\n    },\n    showEdit: {\n      type: Boolean,\n      default: true\n    },\n    showDelete: {\n      type: Boolean,\n      default: true\n    },\n    showAdd: {\n      type: Boolean,\n      default: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      currentIndexImage: 0,\n      images: [],\n      isDragover: false,\n      showLightbox: false,\n      arrLightBox: []\n    };\n  },\n  components: {\n    Popper: Popper,\n    VueImageLightboxCarousel: VueImageLightboxCarousel\n  },\n  computed: {\n    imagePreview: function imagePreview() {\n      var index = findIndex(this.images, {\n        highlight: 1\n      });\n\n      if (index > -1) {\n        return this.images[index].path;\n      } else {\n        return this.images.length ? this.images[0].path : '';\n      }\n    },\n    imageDefault: function imageDefault() {\n      if (this.images[this.currentIndexImage]) {\n        return this.images[this.currentIndexImage].default;\n      }\n    }\n  },\n  methods: {\n    preventEvent: function preventEvent(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onDrop: function onDrop(e) {\n      var _this = this;\n\n      this.isDragover = false;\n      e.stopPropagation();\n      e.preventDefault();\n      var files = e.dataTransfer.files;\n\n      if (!files.length) {\n        return false;\n      }\n\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false;\n      }\n\n      forEach(files, function (value, index) {\n        _this.createImage(value);\n\n        if (!_this.multiple) {\n          return false;\n        }\n      });\n\n      if (document.getElementById(this.idUpload)) {\n        document.getElementById(this.idUpload).value = [];\n      }\n    },\n    onDragover: function onDragover() {\n      this.isDragover = true;\n    },\n    createImage: function createImage(file) {\n      var _this2 = this;\n\n      if (this.disabled) return;\n      var reader = new FileReader();\n      var formData = new FormData();\n      formData.append('file', file);\n\n      reader.onload = function (e) {\n        var dataURI = e.target.result;\n\n        if (dataURI) {\n          if (!_this2.images.length) {\n            _this2.images.push({\n              name: file.name,\n              path: dataURI,\n              highlight: 1,\n              default: 1\n            });\n\n            _this2.currentIndexImage = 0;\n          } else {\n            _this2.images.push({\n              name: file.name,\n              path: dataURI,\n              highlight: 0,\n              default: 0\n            });\n          }\n\n          _this2.$emit('upload-success', formData, _this2.images.length - 1, _this2.images);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    },\n    editImage: function editImage(file) {\n      var _this3 = this;\n\n      if (this.disabled) return;\n      var reader = new FileReader();\n      var formData = new FormData();\n      formData.append('file', file);\n\n      reader.onload = function (e) {\n        var dataURI = e.target.result;\n\n        if (dataURI) {\n          if (_this3.images.length && _this3.images[_this3.currentIndexImage]) {\n            _this3.images[_this3.currentIndexImage].path = dataURI;\n            _this3.images[_this3.currentIndexImage].name = file.name;\n          }\n        }\n      };\n\n      reader.readAsDataURL(file);\n      this.$emit('edit-image', formData, this.currentIndexImage, this.images);\n    },\n    uploadFieldChange: function uploadFieldChange(e) {\n      var _this4 = this;\n\n      var files = e.target.files || e.dataTransfer.files;\n\n      if (!files.length) {\n        return false;\n      }\n\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false;\n      }\n\n      forEach(files, function (value, index) {\n        _this4.createImage(value);\n      });\n\n      if (document.getElementById(this.idUpload)) {\n        document.getElementById(this.idUpload).value = [];\n      }\n    },\n    editFieldChange: function editFieldChange(e) {\n      var _this5 = this;\n\n      var files = e.target.files || e.dataTransfer.files;\n\n      if (!files.length) {\n        return false;\n      }\n\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false;\n      }\n\n      forEach(files, function (value, index) {\n        _this5.editImage(value);\n      });\n\n      if (document.getElementById(this.idEdit)) {\n        document.getElementById(this.idEdit).value = '';\n      }\n    },\n    changeHighlight: function changeHighlight(currentIndex) {\n      this.currentIndexImage = currentIndex;\n      var arr = this.images;\n      this.images = [];\n      arr.map(function (item, index) {\n        if (currentIndex === index) {\n          item.highlight = 1;\n        } else {\n          item.highlight = 0;\n        }\n\n        return item;\n      });\n      this.images = arr;\n    },\n    markIsPrimary: function markIsPrimary(currentIndex) {\n      this.images.map(function (item, index) {\n        if (currentIndex === index) {\n          item.highlight = 1;\n          item.default = 1;\n        } else {\n          item.highlight = 0;\n          item.default = 0;\n        }\n\n        return item;\n      });\n      this.currentIndexImage = 0;\n      this.images = orderBy(this.images, 'default', 'desc');\n      this.$emit('mark-is-primary', currentIndex, this.images);\n    },\n    deleteImage: function deleteImage(currentIndex) {\n      var _this6 = this;\n\n      this.$emit('before-remove', currentIndex, function () {\n        if (_this6.images[currentIndex].default === 1) {\n          _this6.images[0].default = 1;\n        }\n\n        _this6.images.splice(currentIndex, 1);\n\n        _this6.currentIndexImage = 0;\n\n        if (_this6.images.length) {\n          _this6.images[0].highlight = 1;\n        }\n      }, this.images);\n    },\n    openGallery: function openGallery(index) {\n      this.showLightbox = true;\n      this.$refs.lightbox.showImage(index);\n    },\n    onOpenedLightBox: function onOpenedLightBox(value) {\n      if (value) {\n        this.showLightbox = true;\n      } else {\n        this.showLightbox = false;\n      }\n    },\n    isValidNumberOfImages: function isValidNumberOfImages(amount) {\n      if (amount > this.maxImage) {\n        this.$emit('limit-exceeded', amount);\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n  watch: {\n    dataImages: {\n      handler: function handler(newVal) {\n        this.images = cloneDeep(newVal);\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    var _this7 = this;\n\n    document.body.addEventListener('dragleave', function (event) {\n      event.stopPropagation();\n      event.preventDefault();\n      _this7.isDragover = false;\n    });\n  },\n  created: function created() {\n    this.images = [];\n    this.images = cloneDeep(this.dataImages);\n  }\n};",{"version":3,"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","names":["forEach","findIndex","orderBy","cloneDeep","Popper","VueImageLightboxCarousel","name","props","dragText","type","String","default","browseText","primaryText","markIsPrimaryText","popupText","dropText","accept","dataImages","Array","multiple","Boolean","showPrimary","maxImage","Number","idUpload","idEdit","showEdit","showDelete","showAdd","disabled","data","currentIndexImage","images","isDragover","showLightbox","arrLightBox","components","computed","imagePreview","index","highlight","path","length","imageDefault","methods","preventEvent","e","preventDefault","stopPropagation","onDrop","files","dataTransfer","isValidNumberOfImages","value","createImage","document","getElementById","onDragover","file","reader","FileReader","formData","FormData","append","onload","dataURI","target","result","push","$emit","readAsDataURL","editImage","uploadFieldChange","editFieldChange","changeHighlight","currentIndex","arr","map","item","markIsPrimary","deleteImage","splice","openGallery","$refs","lightbox","showImage","onOpenedLightBox","amount","watch","handler","newVal","deep","mounted","body","addEventListener","event","created"],"sourceRoot":"node_modules/vue-upload-multiple-image/src/components","sources":["C:/laragon/www/frontend-masterline/node_modules/vue-upload-multiple-image/src/components/VueUploadMultipleImage.vue"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { forEach, findIndex, orderBy, cloneDeep } from 'lodash'\nimport Popper from 'vue-popperjs'\nimport 'vue-popperjs/dist/css/vue-popper.css'\nimport VueImageLightboxCarousel from 'vue-image-lightbox-carousel'\nexport default {\n\n  name: 'VueUploadMultipleImage',\n\n  props: {\n    dragText: {\n      type: String,\n      default: 'Kéo hình ảnh(nhiều)'\n    },\n    browseText: {\n      type: String,\n      default: '(hoặc) Chọn'\n    },\n    primaryText: {\n      type: String,\n      default: 'Mặc định'\n    },\n    markIsPrimaryText: {\n      type: String,\n      default: 'Đặt làm mặc định'\n    },\n    popupText: {\n      type: String,\n      default: 'Hình ảnh này sẽ được hiển thị làm mặc định'\n    },\n    dropText: {\n      type: String,\n      default: 'Thả tệp của bạn ở đây ...'\n    },\n    accept: {\n      type: String,\n      default: 'image/gif,image/jpeg,image/png,image/bmp,image/jpg'\n    },\n    dataImages: {\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    showPrimary: {\n      type: Boolean,\n      default: true\n    },\n    maxImage: {\n      type: Number,\n      default: 5\n    },\n    idUpload: {\n      type: String,\n      default: 'image-upload'\n    },\n    idEdit: {\n      type: String,\n      default: 'image-edit'\n    },\n    showEdit: {\n      type: Boolean,\n      default: true\n    },\n    showDelete: {\n      type: Boolean,\n      default: true\n    },\n    showAdd: {\n      type: Boolean,\n      default: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n  },\n  data () {\n    return {\n      currentIndexImage: 0,\n      images: [],\n      isDragover: false,\n      showLightbox: false,\n      arrLightBox: []\n    }\n  },\n  components: {\n    Popper,\n    VueImageLightboxCarousel\n  },\n  computed: {\n    imagePreview () {\n      let index = findIndex(this.images, { highlight: 1 })\n      if (index > -1) {\n        return this.images[index].path\n      } else {\n        return this.images.length ? this.images[0].path : ''\n      }\n    },\n    imageDefault () {\n      if (this.images[this.currentIndexImage]) {\n        return this.images[this.currentIndexImage].default\n      }\n    }\n  },\n  methods: {\n    preventEvent (e) {\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    onDrop (e) {\n      this.isDragover = false\n      e.stopPropagation()\n      e.preventDefault()\n      let files = e.dataTransfer.files\n      if (!files.length) {\n        return false\n      }\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false\n      }\n      forEach(files, (value, index) => {\n        this.createImage(value)\n        if (!this.multiple) {\n          return false\n        }\n      })\n      if (document.getElementById(this.idUpload)) {\n        document.getElementById(this.idUpload).value = []\n      }\n    },\n    onDragover () {\n      this.isDragover = true\n    },\n    createImage (file) {\n      if (this.disabled) return\n      let reader = new FileReader()\n      let formData = new FormData()\n      formData.append('file', file)\n      reader.onload = (e) => {\n        let dataURI = e.target.result\n        if (dataURI) {\n          if (!this.images.length) {\n            this.images.push({ name: file.name, path: dataURI, highlight: 1, default: 1 })\n            this.currentIndexImage = 0\n          } else {\n            this.images.push({ name: file.name, path: dataURI, highlight: 0, default: 0 })\n          }\n          this.$emit('upload-success', formData, this.images.length - 1, this.images)\n        }\n      }\n      reader.readAsDataURL(file)\n    },\n    editImage (file) {\n      if (this.disabled) return\n      let reader = new FileReader()\n      let formData = new FormData()\n      formData.append('file', file)\n      reader.onload = (e) => {\n        let dataURI = e.target.result\n        if (dataURI) {\n          if (this.images.length && this.images[this.currentIndexImage]) {\n            this.images[this.currentIndexImage].path = dataURI\n            this.images[this.currentIndexImage].name = file.name\n          }\n        }\n      }\n      reader.readAsDataURL(file)\n      this.$emit('edit-image', formData, this.currentIndexImage, this.images)\n    },\n    uploadFieldChange (e) {\n      let files = e.target.files || e.dataTransfer.files\n      if (!files.length) {\n        return false\n      }\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false\n      }\n      forEach(files, (value, index) => {\n        this.createImage(value)\n      })\n      if (document.getElementById(this.idUpload)) {\n        document.getElementById(this.idUpload).value = []\n      }\n    },\n    editFieldChange (e) {\n      let files = e.target.files || e.dataTransfer.files\n      if (!files.length) {\n        return false\n      }\n      if (!this.isValidNumberOfImages(files.length)) {\n        return false\n      }\n      forEach(files, (value, index) => {\n        this.editImage(value)\n      })\n      if (document.getElementById(this.idEdit)) {\n        document.getElementById(this.idEdit).value = ''\n      }\n    },\n    changeHighlight (currentIndex) {\n      this.currentIndexImage = currentIndex\n      let arr = this.images\n      this.images = []\n      arr.map((item, index) => {\n        if (currentIndex === index) {\n          item.highlight = 1\n        } else {\n          item.highlight = 0\n        }\n        return item\n      })\n      this.images = arr\n    },\n    markIsPrimary (currentIndex) {\n      this.images.map((item, index) => {\n        if (currentIndex === index) {\n          item.highlight = 1\n          item.default = 1\n        } else {\n          item.highlight = 0\n          item.default = 0\n        }\n        return item\n      })\n      this.currentIndexImage = 0\n      this.images = orderBy(this.images, 'default', 'desc')\n      this.$emit('mark-is-primary', currentIndex, this.images)\n    },\n    deleteImage (currentIndex) {\n      this.$emit('before-remove', currentIndex, () => {\n        if (this.images[currentIndex].default === 1) {\n          this.images[0].default = 1\n        }\n        this.images.splice(currentIndex, 1)\n        this.currentIndexImage = 0\n        if (this.images.length) {\n          this.images[0].highlight = 1\n        }\n      }, this.images)\n    },\n    openGallery (index) {\n      this.showLightbox = true\n      this.$refs.lightbox.showImage(index)\n    },\n    onOpenedLightBox (value) {\n      if (value) {\n        this.showLightbox = true\n      } else {\n        this.showLightbox = false\n      }\n    },\n    isValidNumberOfImages (amount) {\n      if (amount > this.maxImage) {\n        this.$emit('limit-exceeded', amount)\n        return false\n      } else {\n        return true\n      }\n    }\n  },\n  watch: {\n    dataImages: {\n      handler: function (newVal) {\n        this.images = cloneDeep(newVal)\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    document.body.addEventListener('dragleave', (event) => {\n      event.stopPropagation()\n      event.preventDefault()\n      this.isDragover = false\n    })\n  },\n  created () {\n    this.images = []\n    this.images = cloneDeep(this.dataImages)\n  }\n}\n"]}]}